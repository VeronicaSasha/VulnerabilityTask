package testUI;

import org.junit.After;
import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;
import pages.CreateNewProjectPage;
import pages.LoginPage;
import pages.MainPage;
import session.Session;

/**
 * @autor : veronica.sasha
 * @date  : 10/11/2020
 **/

public class LoginTodoIstTest {

    MainPage mainPage = new MainPage();
    LoginPage loginPage = new LoginPage();
    CreateNewProjectPage createNewProjectPage = new CreateNewProjectPage();


    @Before
    public void before(){
        Session.getInstance().getDriver().get("https://todoist.com/");
    }

    @Test
    public void verifyLoginAndNewProjectIsSuccess() throws InterruptedException {
        mainPage.login.click();
        Thread.sleep(3000);
        loginPage.emailTextBox.type("sasha@gmail.com");
        loginPage.passwordTextField.type("S@sha!@#2020");
        loginPage.LogInButton.click();
        //loginPage.SelectAnAccount.click();

        // Thread.sleep(3000);
        createNewProjectPage.waitUntillPageIsLoaded(Session.getInstance().getDriver());
        createNewProjectPage.AddProjectButton.click();
        createNewProjectPage.newProjectName.type("test");
        createNewProjectPage.addProject.click();


        Assert.assertFalse("Landing page is up", loginPage.LogInButton.isDisplayedOnPage()  );
        Assert.assertTrue("Project was created", createNewProjectPage.recentlyNewProjectItem.isDisplayedOnPage());
    }

    @After
    public void after(){
       Session.getInstance().closeBrowser();
    }
}
